<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>gamedemo</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>

    <script type="text/javascript">

        var config = {
            
            type: Phaser.AUTO,
            width: 2048,
            height: 1024,
            //zoom: 4,
            pixelArt: true,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 300 },
                    debug: false
                }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
            

        };
        var sidewalk;
        var player;
        var cursors;
        var sky;
        var mountain;
        var darktrees;
        var lighttrees;
        var hills;
        var morehills;
        var road;
        var game = new Phaser.Game(config);

        function preload() {
            this.load.image('sky', 'assets/sky.png');
            this.load.image('mountain', 'assets/mountain.png');
            this.load.image('darktrees', 'assets/darktrees.png');
            this.load.image('lighttrees', 'assets/lighttrees.png');
            this.load.image('hills', 'assets/hills.png');
            this.load.image('morehills', 'assets/morehills.png');
            this.load.image('road', 'assets/road.png');
            this.load.image('sidewalk', 'assets/sidewalk.png');
            this.load.spritesheet('person', 'assets/person.png', { frameWidth: 360, frameHeight: 450 });
        }

        function create() {
           
            sky = this.add.tileSprite(1024, 512, 512, 256, 'sky');
            sky.setScale(4);
            mountain = this.add.tileSprite(1024, 512, 512, 256, 'mountain');
            mountain.setScale(4);
            darktrees = this.add.tileSprite(1024, 512, 512, 256, 'darktrees');
            darktrees.setScale(4);
            lighttrees = this.add.tileSprite(1024, 512, 512, 256, 'lighttrees');
            lighttrees.setScale(4);
            hills = this.add.tileSprite(1024, 512, 512, 256, 'hills');
            hills.setScale(4);
            morehills = this.add.tileSprite(1024, 512, 512, 256, 'morehills');
            morehills.setScale(4);
            road = this.add.tileSprite(1024, 512, 512, 256, 'road');
            road.setScale(4);


            sidewalk = this.physics.add.staticGroup();
            sidewalk.create(1024, 800, 'sidewalk');

            player = this.physics.add.sprite(100, 450, 'person');

            player.setBounce(0.2);
            player.setCollideWorldBounds(true);

            this.anims.create({
                key: 'right',
                frames: this.anims.generateFrameNumbers('person', { start: 0, end: 4 }),
                frameRate: 4,
                repeat: -1
            });

            this.anims.create({
                key: 'turn',
                frames: [{ key: 'person', frame: 5 }],
                frameRate: 20,
            });

            cursors = this.input.keyboard.createCursorKeys();

            this.physics.add.collider(player, sidewalk);
        }

        function update() {
            
            if (cursors.right.isDown) {

                mountain.tilePositionX += .1;
                darktrees.tilePositionX += .2;
                lighttrees.tilePositionX += .4;
                hills.tilePositionX += .8;
                morehills.tilePositionX += 1.6;
                road.tilePositionX += 3.2;
        

                //player.x +=2;
                player.anims.play('right', true);
                


            }
            else {
                player.setVelocityX(0);
                player.anims.play('turn');

            }
        }

    </script>

</body>

</html>